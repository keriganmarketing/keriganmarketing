!function($){"namespace sumo";$.fn.SumoSelect=function(options){var settings=$.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1},options),ret=this.each(function(){var selObj=this;!this.sumo&&$(this).is("select")&&(this.sumo={E:$(selObj),is_multi:$(selObj).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],init:!0,createElems:function(){var O=this;if(O.E.wrap('<div class="SumoSelect" tabindex="0">'),O.select=O.E.parent(),O.caption=$("<span>"),O.CaptionCont=$('<p class="CaptionCont"><label><i></i></label></p>').addClass("SelectBox").attr("style",O.E.attr("style")).prepend(O.caption),O.select.append(O.CaptionCont),O.E.attr("disabled")&&O.select.addClass("disabled").removeAttr("tabindex"),settings.outputAsCSV&&O.is_multi&&O.E.attr("name")&&(O.select.append($('<input class="HEMANT123" type="hidden" />').attr("name",O.E.attr("name")).val(O.getSelStr())),O.E.removeAttr("name")),O.isMobile()&&!settings.forceCustomRendering)return void O.setNativeMobile();O.E.attr("name")&&O.select.addClass("sumo_"+O.E.attr("name")),O.E.addClass("SumoUnder").attr("tabindex","-1"),O.optDiv=$('<div class="optWrapper '+(settings.up?"up":"")+'">'),O.floatingList(),O.ul=$('<ul class="options">'),O.optDiv.append(O.ul),settings.selectAll&&O.selAll(),settings.search&&O.Search();var lis=[];$(O.E.children("option")).each(function(i,opt){lis.push(O.createLi($(opt)))}),O.ul.append(lis),O.is_multi&&O.multiSelelect(),O.select.append(O.optDiv),O.basicEvents(),O.selAllState()},createLi:function(opt,i){var O=this;return opt.attr("value")||opt.attr("value",opt.val()),li=$('<li data-val="'+opt.val()+'"><label>'+opt.text()+"</label></li>"),O.is_multi&&li.prepend("<span><i></i></span>"),opt[0].disabled&&(li=li.addClass("disabled")),O.onOptClick(li),opt[0].selected&&li.addClass("selected"),opt.attr("class")&&li.addClass(opt.attr("class")),li},getSelStr:function(){return sopt=[],this.E.children("option:selected").each(function(){sopt.push($(this).val())}),sopt.join(settings.csvSepChar)},multiSelelect:function(){var O=this;O.optDiv.addClass("multiple"),O.okbtn=$('<p class="btnOk">'+settings.locale[0]+"</p>").click(function(){settings.triggerChangeCombined&&(changed=!1,O.E.children("option:selected").length!=O.Pstate.length?changed=!0:O.E.children("option:selected").each(function(){O.Pstate.indexOf($(this).val())<0&&(changed=!0)}),changed&&(O.E.trigger("change"),O.mob&&O.E.trigger("click"),O.setText())),O.hideOpts()}),O.cancelBtn=$('<p class="btnCancel">'+settings.locale[1]+"</p>").click(function(){O._cnbtn(),O.hideOpts()}),O.optDiv.append($('<div class="MultiControls">').append(O.okbtn).append(O.cancelBtn))},_cnbtn:function(){var O=this;for(O.E.children("option:selected").each(function(){this.selected=!1}),O.optDiv.find("li.selected").removeClass("selected"),i=0;i<O.Pstate.length;i++)O.E.children('option[value="'+O.Pstate[i]+'"]')[0].selected=!0,O.optDiv.find('li[data-val="'+O.Pstate[i]+'"]').addClass("selected");O.selAllState()},selAll:function(){var O=this;O.is_multi&&(O.chkAll=$("<i>"),O.selAll=$('<p class="select-all"><label>'+settings.locale[2]+"</label></p>").prepend($("<span></span>").append(O.chkAll)),O.chkAll.on("click",function(){O.selAll.toggleClass("selected"),O.optDiv.find("ul.options li").not(".hidden").each(function(ix,e){e=$(e),O.selAll.hasClass("selected")?e.hasClass("selected")||e.trigger("click"):e.hasClass("selected")&&e.trigger("click")})}),O.optDiv.prepend(O.selAll))},Search:function(){var O=this,cc=O.CaptionCont.addClass("search"),P=$('<p class="no-match">');O.ftxt=$('<input type="text" class="search-txt" value="" placeholder="'+settings.searchText+'">').on("click",function(e){e.stopPropagation()}),cc.append(O.ftxt),O.optDiv.children("ul").after(P),O.ftxt.on("keyup.sumo",function(){var hid=O.optDiv.find("ul.options li").each(function(ix,e){e=$(e),e.text().toLowerCase().indexOf(O.ftxt.val().toLowerCase())>-1?e.removeClass("hidden"):e.addClass("hidden")}).not(".hidden");P.html(settings.noMatch.replace(/\{0\}/g,O.ftxt.val())).toggle(!hid.length),O.selAllState()})},selAllState:function(){var O=this;if(settings.selectAll){var sc=0,vc=0;O.optDiv.find("ul.options li").not(".hidden").each(function(ix,e){$(e).hasClass("selected")&&sc++,$(e).hasClass("disabled")||vc++}),sc==vc?O.selAll.removeClass("partial").addClass("selected"):0==sc?O.selAll.removeClass("selected partial"):O.selAll.addClass("partial"),O.init&&(O.selAll.removeClass("selected partial"),O.init=!1)}},showOpts:function(){var O=this;O.E.attr("disabled")||(O.is_opened=!0,O.select.addClass("open"),O.ftxt&&O.ftxt.focus(),$(document).on("click.sumo",function(e){if(!O.select.is(e.target)&&0===O.select.has(e.target).length){if(!O.is_opened)return;O.hideOpts(),O.is_multi&&settings.okCancelInMulti&&O._cnbtn()}}),O.is_floating&&(H=O.optDiv.children("ul").outerHeight()+2,O.is_multi&&(H+=parseInt(O.optDiv.css("padding-bottom"))),O.optDiv.css("height",H)),O.is_multi&&(O.is_floating||settings.okCancelInMulti)&&(O.Pstate=[],O.E.children("option:selected").each(function(){O.Pstate.push($(this).val())})))},hideOpts:function(){var O=this;O.is_opened&&(O.is_opened=!1,O.select.removeClass("open").find("ul li.sel").removeClass("sel"),$(document).off("click.sumo"),O.select.focus())},setOnOpen:function(){var O=this,li=O.optDiv.find("ul li:not(.hidden)").eq(settings.search?0:O.E[0].selectedIndex);O.optDiv.find("ul li.sel").removeClass("sel"),li.addClass("sel"),O.showOpts()},nav:function(up){var c,O=this,s="li:not(.disabled, .hidden)",sel=O.optDiv.find("ul li.sel:not(.hidden)");if(O.is_opened&&sel.length){if(c=up?sel.prevAll(s):sel.nextAll(s),!c.length)return;sel.removeClass("sel"),sel=c.first().addClass("sel");var ul=O.optDiv.find("ul"),st=ul.scrollTop(),t=sel.position().top+st;t>=st+ul.height()-sel.outerHeight()&&ul.scrollTop(t-ul.height()+sel.outerHeight()),st>t&&ul.scrollTop(t)}else O.setOnOpen()},basicEvents:function(){var O=this;O.CaptionCont.click(function(evt){O.E.trigger("click"),O.is_opened?O.hideOpts():O.showOpts(),evt.stopPropagation()}),O.select.on("keydown.sumo",function(e){switch(e.which){case 38:O.nav(!0);break;case 40:O.nav(!1);break;case 32:if(O.ftxt.is(e.target))return;case 13:O.is_opened?O.optDiv.find("ul li.sel").trigger("click"):O.setOnOpen();break;case 9:case 27:return O.is_multi&&settings.okCancelInMulti&&O._cnbtn(),void O.hideOpts();default:return}e.preventDefault()}),$(window).on("resize.sumo",function(){O.floatingList()})},onOptClick:function(li){var O=this;li.click(function(){var li=$(this);li.hasClass("disabled")||(txt="",O.is_multi?(li.toggleClass("selected"),O.E.children('option[value="'+li.data("val")+'"]')[0].selected=li.hasClass("selected"),O.selAllState()):(li.parent().find("li.selected").removeClass("selected"),li.toggleClass("selected"),O.E.val(li.attr("data-val"))),O.is_multi&&settings.triggerChangeCombined&&(O.is_floating||settings.okCancelInMulti)||(O.setText(),O.E.trigger("change").trigger("click")),O.is_multi||O.hideOpts())})},setText:function(){var O=this;if(O.placeholder="",O.is_multi){for(sels=O.E.children(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i+1>=settings.csvDispCount&&settings.csvDispCount){sels.length==O.E.find("option").length&&settings.captionFormatAllSelected?O.placeholder=settings.captionFormatAllSelected.replace(/\{0\}/g,sels.length):O.placeholder=settings.captionFormat.replace(/\{0\}/g,sels.length);break}O.placeholder+=$(sels[i]).text()+", "}O.placeholder=O.placeholder.replace(/,([^,]*)$/,"$1")}else O.placeholder=O.E.children(":selected").not(":disabled").text();return is_placeholder=!1,O.placeholder||(is_placeholder=!0,O.placeholder=O.E.attr("placeholder"),O.placeholder||(O.placeholder=O.E.children("option:disabled:selected").text())),O.placeholder=O.placeholder?settings.prefix+" "+O.placeholder:settings.placeholder,O.caption.html(O.placeholder),csvField=O.select.find("input.HEMANT123"),csvField.length&&csvField.val(O.getSelStr()),is_placeholder?O.caption.addClass("placeholder"):O.caption.removeClass("placeholder"),O.placeholder},isMobile:function(){for(var ua=navigator.userAgent||navigator.vendor||window.opera,i=0;i<settings.nativeOnDevice.length;i++)if(ua.toString().toLowerCase().indexOf(settings.nativeOnDevice[i].toLowerCase())>0)return settings.nativeOnDevice[i];return!1},setNativeMobile:function(){var O=this;O.E.addClass("SelectClass"),O.mob=!0,O.E.change(function(){O.setText()})},floatingList:function(){var O=this;O.is_floating=$(window).width()<=settings.floatWidth,O.optDiv.toggleClass("isFloating",O.is_floating),O.is_floating||O.optDiv.css("height",""),O.optDiv.toggleClass("okCancelInMulti",settings.okCancelInMulti&&!O.is_floating)},vRange:function(i){var O=this;if(opts=O.E.children("option"),opts.length<=i||0>i)throw"index out of bounds";return O},toggSel:function(c,i){var O=this.vRange(i);O.E.children("option")[i].disabled||(O.E.children("option")[i].selected=c,O.mob||O.optDiv.find("ul.options li").eq(i).toggleClass("selected",c),O.setText())},toggDis:function(c,i){var O=this.vRange(i);O.E.children("option")[i].disabled=c,c&&(O.E.children("option")[i].selected=!1),O.mob||O.optDiv.find("ul.options li").eq(i).toggleClass("disabled",c).removeClass("selected"),O.setText()},toggSumo:function(val){var O=this;return O.enabled=val,O.select.toggleClass("disabled",val),val?(O.E.attr("disabled","disabled"),O.select.removeAttr("tabindex")):(O.E.removeAttr("disabled"),O.select.attr("tabindex","0")),O},toggSelAll:function(c){var O=this;O.E.find("option").each(function(ix,el){O.E.find("option")[$(this).index()].disabled||(O.E.find("option")[$(this).index()].selected=c,O.mob||O.optDiv.find("ul.options li").eq($(this).index()).toggleClass("selected",c),O.setText())}),O.mob||!settings.selectAll&&!settings.search||O.selAll.removeClass("partial").toggleClass("selected",c)},reload:function(){var elm=this.unload();return $(elm).SumoSelect(settings)},unload:function(){var O=this;return O.select.before(O.E),O.E.show(),settings.outputAsCSV&&O.is_multi&&O.select.find("input.HEMANT123").length&&O.E.attr("name",O.select.find("input.HEMANT123").attr("name")),O.select.remove(),delete selObj.sumo,selObj},add:function(val,txt,i){if("undefined"==typeof val)throw"No value to add";var O=this;if(opts=O.E.children("option"),"number"==typeof txt&&(i=txt,txt=val),"undefined"==typeof txt&&(txt=val),opt=$("<option></option>").val(val).html(txt),opts.length<i)throw"index out of bounds";return"undefined"==typeof i||opts.length==i?(O.E.append(opt),O.mob||O.ul.append(O.createLi(opt))):(opts.eq(i).before(opt),O.mob||O.ul.children("li").eq(i).before(O.createLi(opt))),selObj},remove:function(i){var O=this.vRange(i);O.E.children("option").eq(i).remove(),O.mob||O.optDiv.find("ul.options li").eq(i).remove(),O.setText()},selectItem:function(i){this.toggSel(!0,i)},unSelectItem:function(i){this.toggSel(!1,i)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(i){this.toggDis(!0,i)},enableItem:function(i){this.toggDis(!1,i)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var O=this;return O.createElems(),O.setText(),O}},selObj.sumo.init())});return 1==ret.length?ret[0]:ret},$(document).ready(function(){$(".sumo").each(function(){var firstOp=$(this).find("option").first(),phtext=firstOp.text();firstOp.remove(),$(this).attr("placeholder",phtext),$(this).SumoSelect({csvDispCount:3,search:!0,searchText:"Search"})})})}(jQuery);